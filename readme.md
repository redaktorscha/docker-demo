# Openedu ITMO web tech course
## Week 6 homework project

### Цель
- Разработать веб-приложение с использованием фреймворка Express.

### Приложение должно
- Находиться в публичном доступе;
- Работать по протоколу HTTPS;
- В заголовках всех ответов выдавать:
    - Access-Control-Allow-Origin со значением «*»;
    - Access-Control-Allow-Methods со значением «GET,POST,PUT,PATCH,OPTIONS,DELETE»;
    - Соблюдать политику Trailing Slashes, при которой основная часть URI всегда * заканчивается символом слэша «/»;
    - Использовать фреймворк Express.
    - Исключить использование console и любых других зависимостей, не перечисленных ниже.
    - Исключить комментарии.

###  Варианты размещения
- Heroku;
- Repl.it;
- Собственный сервер (вариант для продвинутых).

### Структура приложения
- Структура веб-приложения должна состоять из файлов app.js и index.js, размещенных в рамках одной папки.

#### Файл app.js
- Данный файл должен в формате ESM экспортировать функцию инициалиации Express-приложения (примеры работы с экспортом).
- Не забудьте о ключе type="module" в файле package.json
- Экспортируемая функция должна принимать пять аргументов:

    - express - конструктор Express-приложения (пример вызова конструктора);

    - bodyParser – middleware для Express для работы с телом запроса;

    - createReadStream – функция из стандартного модуля fs платформы node's

    - crypto, http – стандартные модули node's

- В результате своей работы экспортируемая функция должна возвращать экземпляр готового к работе Express-приложения.

#### Файл index.js
- Сначала в данном файле должны быть импортированы внешние модули необходимые для работы приложения, а именно:

    - express,

    - body-parser – middleware для Express для работы с телом запроса;

    - createReadStream, – функция из стандартного модуля fs.

    - crypto и http – стандартные модули.

- Затем из файла app.js необходимо импортировать функцию инициализации Express-приложения, которую необходимо вызвать, передав в неё express, bodyParser, createReadStream, crypto и http:

        import appSrc from './app.js';
        const app = appSrc(express, bodyParser, createReadStream, crypto, http);
- Полученному приложению необходимо дать указание о прослушивании входящих запросов с порта предоставляемого средой хостера (Heroku или Repl.it) или собственного:

        app.listen(process.env.PORT);

### Требования к логике приложения (app.js)
    - Приложение должно содержать следующие маршруты:

    - /login/

    - /code/

    - /sha1/:input/

    - /req/ с параметром ?addr=

    - Маршрут отлова всех остальных вариантов запросов (используйте для этого app.all)

#### Маршрут /login/
- Данный маршрут должен возвращать Ваш логин в системе OpenEDU (например, itmo2342351)

#### Маршрут /code/
- Данный маршрут должен возвращать исходный код текущего файла (в данном случае файла app.js). Для этого необходимо воспользоваться функцией createReadStream модуля fs, предназначенной для чтения файлов.

- При этом для получения пути к файлу необходимо воспользоваться значением import.meta.url.substring(7), чтобы получить расположение текущего файла в рамках файловой системы.

#### Маршрут /sha1/:input/
- Данный маршрут должен возвращать хэш sha1 от строки, представленной параметром URL (по имени input)

#### Маршрут /req/
- Данный маршрут должен возвращать содержимое интернет-ресурса по адресу, содержащемуся в query-параметре URL по имени addr (в простом текстовом формате). Для этого следует воспользоваться методом get модуля http. Т.е. приложение должно обратиться по адресу, который ему передан, прочитать его содержимое и тут же вернуть в качестве ответа.
- Данный маршрут должен обрабатываться методами GET и POST c возможностью в последнем случае получить значение addr из тела запроса, например

        curl 'https://demoapp.kodaktor.ru/req/?addr=http://node-server.online/r/assets/week.txt' (5)

        curl 'https://demoapp.kodaktor.ru/req/' -d 'addr=http://node-server.online/r/assets/week.txt' (5)

#### Маршрут отлова остальных запросов
- Данный маршрут также должен возвращать ваш логин в системе.

### Предоставление ответа
- В поле ввода ответа, которое представлено ниже, необходимо ввести корневой маршрут Вашего приложения, т.е. URI аналогичный следующему: https://myweek3work.herokuapp.com/ (не забывайте про политику Trailing Slashes)
- Login: mariianasonkina


https://repl.it/@redaktorscha/InconsequentialDistinctComputergame